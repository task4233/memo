---
date: 2019-03-18
description: 'デスペめも'
category: 
 - memo
 - デスペ
---

# デスペめも

# 03/18
## H30 午後1-1
## リレーションの矢印について
 - $A \rightarrow B$のとき, $A:B = 1:$多
 - 矢印の先が多
 - 記載がない場合は1:多

## サブタイプとスーパータイプ
 - 汎化した側のエンティティをスーパータイプという
 - 特化した側のエンティティをサブタイプという
 - 例えば, 料理というスーパータイプに対して, 和食セットや洋食セット, デザートコースといったサブタイプが存在する

## 排他的サブタイプと共存的サブタイプ
 - サブタイプが共通部分を持つときには共存的サブタイプに分類され, 共通部分を持たないとき排他的サブタイプに分類される
 - 例えば, セット類とサービス対象類というスーパータイプが存在したとき, 和食セットがサービス対象ならばこれはキュゾン的サブタイプに分類される
 - 要するに, 複数のスーパータイプに属することができる場合, 共存的サブタイプに分類されるわけだ

 - 「〜で分類」や「どちらか一方にしか存在できない」, 「両方に属するものは損じ足ない」という文言がある場合は, 排他的サブタイプに分類される

# 記述から読み取れるエンティティと属性
 - 「〜で分類」$\rightarrow$ サブタイプの切り口
   - AをBで分類 
     - AにはBが必要
     - エンティティAの属性としてBが挙げられる
 - 「〜で分類」(サブタイプ無しver.) $\rightarrow$ ただの属性として持たせる
   - AをBで分類
     - エンティティAの属性としてBを持たせる
 - 「〜で登録する」$\rightarrow$ 属性として持たせる
   - AにはBを登録する
     - エンティティAの属性としてBを持たせる

# キー
## スーパーキー(Super Key)
 - タプルを一意に識別できるキーのこと
 - 候補キーに, 様々な組み合わせで他の属性を付け足したもの
   - 冪集合のようなもの

## 候補キー(Candidate Key)
 - 次の2つの制約を持つ
   - タプルを一意に識別できること
   - スーパーキーの中で極小(それ以上分解できないもの)
     - 極小とは, 余計な属性を含まないもの
     - それ以上属性を減らすとタプルの識別ができなくなってしまうもの

## 主キー(Primary Key)
 - 次の2つの制約をもつ
   - 一意性制約
   - 非ナル(NULLが認められない)
 - 候補キーの中から元もふさわしいものが選ばれる

## 代理キー(Alternate Key)
 - 候補キーの中で主キーに選ばれなかったキー

## 小まとめ
 - 主キー $\in$ 候補キー $\subset$ < スーパーキー

## サロゲートキー(Surrogate Key)
 - 連番がよく使用される
 - 一意性を確保して主キーとして使用されるためだけに使用される
 - 次のような場合に使用される
   - 主キーが複合キーの場合
     - 主キーが複数の属性で構成されていると扱いづらい
     - そのため, 主キーの代わりにサロゲートキーが用いられることがある
   - データウェアハウスで, 長期間の履歴を管理したい場合
     - 主キーはstringになることがあるが, integerで管理した方が楽
     - 数字列なので一意性が損なわれづらい

## 外部キー
 - 他のリレーションの主キー(または候補キーでも良い)を参照する項目のこと
 - エンティティA,Bについて, A-Bという1:1のリレーションがあるとする
 - このとき, Aの主キーpを参照するBの外部キーqが存在するとする
 - Aの主キーpには実線で下線が引かれる
 - Bの外部キーqには破線で下線が引かれる