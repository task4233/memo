(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{288:function(t,a,e){"use strict";e.r(a);var s=e(38),r=Object(s.a)({},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"rails-todoの製作手順めも"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#rails-todoの製作手順めも","aria-hidden":"true"}},[t._v("#")]),t._v(" Rails_Todoの製作手順めも")]),t._v(" "),e("h1",{attrs:{id:"_12-26"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_12-26","aria-hidden":"true"}},[t._v("#")]),t._v(" 12/26")]),t._v(" "),e("ol",[e("li",[t._v("rootのToppageの作成")])]),t._v(" "),e("h2",{attrs:{id:"homeアクションとaboutアクションを追加"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#homeアクションとaboutアクションを追加","aria-hidden":"true"}},[t._v("#")]),t._v(" homeアクションとaboutアクションを追加")]),t._v(" "),e("p",[t._v("$ rails generate controller StaticPages home about\n($ rails generate controller {ControllerName} {action_name}+)")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("Running via Spring preloader "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" process "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("30664")]),t._v("\n      create  app/controllers/static_pages_controller.rb\n       route  get "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'static_pages/about'")]),t._v("\n       route  get "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'static_pages/home'")]),t._v("\n      invoke  erb\n      create    app/views/static_pages\n      create    app/views/static_pages/home.html.erb\n      create    app/views/static_pages/about.html.erb\n      invoke  test_unit\n      create    test/controllers/static_pages_controller_test.rb\n      invoke  helper\n      create    app/helpers/static_pages_helper.rb\n      invoke    test_unit\n      invoke  assets\n      invoke    coffee\n      create      app/assets/javascripts/static_pages.coffee\n      invoke    scss\n      create      app/assets/stylesheets/static_pages.scss\n")])])]),e("p",[t._v("結果, "),e("code",[t._v("$rails s")]),t._v("すると, 以下のページにアクセス可能になる。")]),t._v(" "),e("ul",[e("li",[t._v("http://192.168.33.10:3000/static_pages/home")]),t._v(" "),e("li",[t._v("http://192.168.33.10:3000/static_pages/about")])]),t._v(" "),e("h2",{attrs:{id:"内容の編集"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#内容の編集","aria-hidden":"true"}},[t._v("#")]),t._v(" 内容の編集")]),t._v(" "),e("p",[t._v("表示される内容はViewにあたるので, 以下のパスに存在している。")]),t._v(" "),e("ul",[e("li",[t._v("/app/views/static_pages/home")]),t._v(" "),e("li",[t._v("/app/views/static_pages/about")])]),t._v(" "),e("h2",{attrs:{id:"テストの作成"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#テストの作成","aria-hidden":"true"}},[t._v("#")]),t._v(" テストの作成")]),t._v(" "),e("p",[t._v("テストは"),e("code",[t._v("/test/controllers/")]),t._v("以下に存在する。")]),t._v(" "),e("div",{staticClass:"language-ruby extra-class"},[e("pre",{pre:!0,attrs:{class:"language-ruby"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# test/controllers/static_pages_controller_test.rb")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("~")]),t._v("\ntest “should get home” "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("do")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# homeページにGETリクエスト")]),t._v("\n  get static_pages_home_url\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# レスポンスがGREENになるはず")]),t._v("\n  assert_response "),e("span",{pre:!0,attrs:{class:"token symbol"}},[t._v(":success")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("~")]),t._v("\n")])])]),e("p",[t._v("テスト駆動開発はテストから作る。")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("リクエストして, 正しくレスポンスされるかを確認する\n{get/post} {page_url}\nassert_response :success")])]),t._v(" "),e("li",[e("p",[t._v("オブジェクトが存在するかを確認\nassert_select “{object_name(e.g. title)}”, “{Screening text}”")])])]),t._v(" "),e("h2",{attrs:{id:"埋め込みruby"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#埋め込みruby","aria-hidden":"true"}},[t._v("#")]),t._v(" 埋め込みRuby")]),t._v(" "),e("ul",[e("li",[e("code",[t._v("<% …% >")]),t._v(" := 中に書かれたコードを実行するだけ")]),t._v(" "),e("li",[e("code",[t._v("<%= …% >")]),t._v(" := 中に書かれたコードの実行結果がそこに挿入される")])]),t._v(" "),e("p",[e("code",[t._v("provide")]),t._v("メソッドを使用してタイトルをページごとに変更する。")]),t._v(" "),e("div",{staticClass:"language-ruby extra-class"},[e("pre",{pre:!0,attrs:{class:"language-ruby"}},[e("code",[t._v("app"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("view"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("static_pages"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("html"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("erb\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("%")]),t._v(" provide"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token symbol"}},[t._v(":title")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" “"),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("Help")]),t._v("”"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("%>\n~\n<%= yield(:title) %>")]),t._v("\n")])])]),e("p",[t._v("ページのレイアウトは"),e("code",[t._v("app/views/layouts/application.html.erb")]),t._v("以下に存在している。\nこれを用いることで, "),e("code",[t._v("provide")]),t._v("メソッドを各ファイルで定義し, "),e("code",[t._v("yield")]),t._v("メソッドを書く必要がなくなる。")]),t._v(" "),e("h2",{attrs:{id:"html5のサポート"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#html5のサポート","aria-hidden":"true"}},[t._v("#")]),t._v(" html5のサポート")]),t._v(" "),e("div",{staticClass:"language-ruby extra-class"},[e("pre",{pre:!0,attrs:{class:"language-ruby"}},[e("code",[e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" lt "),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("IE")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("9")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("script src"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"//cdnjs.cloudflare.com/ajax/libs/html5shiv/r29/html5.min.js"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("script"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("endif"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),e("h2",{attrs:{id:"bootstrapの追加"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#bootstrapの追加","aria-hidden":"true"}},[t._v("#")]),t._v(" bootstrapの追加")]),t._v(" "),e("p",[t._v("app/assets/stylesheet/custom.scssに,\n@import bootstrap\n@import bootstrap-sprockets\nを追加")]),t._v(" "),e("h2",{attrs:{id:"bootstrapの効果"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#bootstrapの効果","aria-hidden":"true"}},[t._v("#")]),t._v(" bootstrapの効果")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("navbar navbar-fixed-top := nav要素を上に表示")])]),t._v(" "),e("li",[e("p",[t._v("navbar-inverse := 色反転")])]),t._v(" "),e("li",[e("p",[t._v("nav navbar-nav navbar-right := navbar内のnav要素を右に表示")])]),t._v(" "),e("li",[e("p",[t._v("jumbotran := 背景をそれっぽく覆う")])])]),t._v(" "),e("h2",{attrs:{id:"renderメソッドによる分散コーディング"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#renderメソッドによる分散コーディング","aria-hidden":"true"}},[t._v("#")]),t._v(" renderメソッドによる分散コーディング")]),t._v(" "),e("p",[e("code",[t._v("<%= render layouts/hoge%>")]),t._v("と書くと, app/views/layout/_hoge.html.erb\nを参照する。")]),t._v(" "),e("h2",{attrs:{id:"アセットパイプライン"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#アセットパイプライン","aria-hidden":"true"}},[t._v("#")]),t._v(" アセットパイプライン")]),t._v(" "),e("ul",[e("li",[t._v("app/assets := 現在のアプリケーション固有のアセット")]),t._v(" "),e("li",[t._v("lib/assets := 開発チームによって作成されたライブラリ用のアセット")]),t._v(" "),e("li",[t._v("vendor/assets := サードパーティのアセット")])]),t._v(" "),e("h2",{attrs:{id:"フルプロセッサエンジン"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#フルプロセッサエンジン","aria-hidden":"true"}},[t._v("#")]),t._v(" フルプロセッサエンジン")]),t._v(" "),e("p",[t._v("chain可能で, 順番に参照して結合する。\n末尾から実行される。\ne.g.) hoge.js.coffee.erbだと, erb→coffeeScriptの順番")]),t._v(" "),e("h2",{attrs:{id:"リンクのテスト-統合テスト"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#リンクのテスト-統合テスト","aria-hidden":"true"}},[t._v("#")]),t._v(" リンクのテスト(統合テスト)")]),t._v(" "),e("p",[t._v("$ rails generate integration_test {test_name}\ntest/integration/{test_name}_test.rbが作成される")]),t._v(" "),e("h1",{attrs:{id:"_12-27"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_12-27","aria-hidden":"true"}},[t._v("#")]),t._v(" 12/27")]),t._v(" "),e("h1",{attrs:{id:"usersモデルの作成"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#usersモデルの作成","aria-hidden":"true"}},[t._v("#")]),t._v(" Usersモデルの作成")]),t._v(" "),e("p",[t._v("まずはコントローラを作成")]),t._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[t._v("$ rails g controller Users new\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Usersコントローラにnewアクションを与える")]),t._v("\n")])])]),e("p",[t._v("次にモデルを作成\n$ rails g model User name: string email string")]),t._v(" "),e("h2",{attrs:{id:"モデルのバリデーション"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#モデルのバリデーション","aria-hidden":"true"}},[t._v("#")]),t._v(" モデルのバリデーション")]),t._v(" "),e("p",[t._v("app/models/user.rb以下に記入\nvalidate {要素名}, オプション")]),t._v(" "),e("p",[t._v("presence := 存在しているか\nlength := 文字列長(maximum, minimum, etc…)\nuniqueness := 一意性があるか{ case_sensitive: false }で大文字小文字を区別しない\nformat: {with: } := 正規表現\n/ := 正規表現の開始と終端\n\\A := 文字列の先頭\n[\\w+-.]+ := 英数字, _, +, -, .のいずれかを少なくとも1回繰り返す\n@ := アットマーク\n[a-z\\d-.]+ := 英小文字, 数字, -, . のいずれか1つを少なくとも1文字以上繰り返す\n. := ドット\n[a-z]+ := 英小文字を少なくとも1回以上繰り返す\n\\z := 文字列の末尾\ni := 大文字小文字を無視するオプション")]),t._v(" "),e("h2",{attrs:{id:"dbのmigrate"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#dbのmigrate","aria-hidden":"true"}},[t._v("#")]),t._v(" dbのmigrate")]),t._v(" "),e("p",[t._v("ファイル直接書き換えの場合は,\n$ rails db:migrate:reset")]),t._v(" "),e("h1",{attrs:{id:"usersリソース"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#usersリソース","aria-hidden":"true"}},[t._v("#")]),t._v(" Usersリソース")]),t._v(" "),e("p",[t._v("config/routes.rbに\nresources :users\nを追加。")]),t._v(" "),e("p",[t._v("すると, index, show, new, create, edit, update, destroyが使用可能になる。\nアクションの定義は, app/controllers/users_controller.rbで行う。\ndef {action_name}\n…\nend\nで追加できる。")]),t._v(" "),e("p",[t._v("debuggerを追加するとbybugが使用可能になる。")]),t._v(" "),e("h2",{attrs:{id:"signup"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#signup","aria-hidden":"true"}},[t._v("#")]),t._v(" signup")]),t._v(" "),e("p",[t._v("app/views/users/new.html.erbに追加。\n明日はSignupのテストから。")]),t._v(" "),e("p",[t._v("テスト終わり\nassert_template\nassert_select := 以降のテキストが存在しているか\ncontent_tag := 以降の要素をタグとしてhtmlを作成\nassert_no_difference := その中の行為で要素の変更がないことをテストする")]),t._v(" "),e("h1",{attrs:{id:"sessions-login-logout"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#sessions-login-logout","aria-hidden":"true"}},[t._v("#")]),t._v(" sessions(login, logout)")]),t._v(" "),e("h2",{attrs:{id:"sessionsコントローラを生成-newアクションを追加"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#sessionsコントローラを生成-newアクションを追加","aria-hidden":"true"}},[t._v("#")]),t._v(" sessionsコントローラを生成(newアクションを追加)")]),t._v(" "),e("p",[t._v("$ rails g controller Sessions new")]),t._v(" "),e("h2",{attrs:{id:"ルートを追加"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ルートを追加","aria-hidden":"true"}},[t._v("#")]),t._v(" ルートを追加")]),t._v(" "),e("p",[t._v("get    '/login',   to: 'sessions#new'\npost   '/login',   to: 'sessions#create'\ndelete '/logout',  to: 'sessions#destroy'")]),t._v(" "),e("h2",{attrs:{id:"ルートを確認する"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ルートを確認する","aria-hidden":"true"}},[t._v("#")]),t._v(" ルートを確認する")]),t._v(" "),e("p",[t._v("$ rails routes")]),t._v(" "),e("h2",{attrs:{id:"flashメッセージで報告"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#flashメッセージで報告","aria-hidden":"true"}},[t._v("#")]),t._v(" flashメッセージで報告")]),t._v(" "),e("p",[t._v("def createの部分にflash.now[:danger] = ‘Invalid’を追加すると良い")]),t._v(" "),e("h2",{attrs:{id:"トグルメニューの追加"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#トグルメニューの追加","aria-hidden":"true"}},[t._v("#")]),t._v(" トグルメニューの追加")]),t._v(" "),e("p",[t._v("class=“dropdown-toggle”を追加すればおk")]),t._v(" "),e("h2",{attrs:{id:"ログアウト"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ログアウト","aria-hidden":"true"}},[t._v("#")]),t._v(" ログアウト")]),t._v(" "),e("p",[t._v("helperに追加\nsession.delete(:user_id)\n@current_user = nil\nでおk。セッションを切っても@curernt_userはそのままなので, nilで上書きする")]),t._v(" "),e("p",[t._v("その後, controllerに追加\ncontrollerに全部書いてもいいが, 中身が大きくなりすぎるので, helperを用いて分割する。")]),t._v(" "),e("h1",{attrs:{id:"todo"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#todo","aria-hidden":"true"}},[t._v("#")]),t._v(" todo")]),t._v(" "),e("p",[t._v("rails g model Task title:string\nrails g controller Tasks\nルーティングの追加")]),t._v(" "),e("p",[t._v("他のアクションの追加\nnew, create\nviewの追加\nedit, update")]),t._v(" "),e("p",[t._v("controllerで宣言したresourceはviewでも利用可能")]),t._v(" "),e("h1",{attrs:{id:"_1-27"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-27","aria-hidden":"true"}},[t._v("#")]),t._v(" 1/27")]),t._v(" "),e("h2",{attrs:{id:"controller間のインスタンス参照"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#controller間のインスタンス参照","aria-hidden":"true"}},[t._v("#")]),t._v(" Controller間のインスタンス参照")]),t._v(" "),e("p",[t._v("他のコントローラのインスタンスは参照できないので, そのコントローラで他のコントローラを呼び出せばよい."),e("br"),t._v("\n以下のような感じ.")]),t._v(" "),e("div",{staticClass:"language-ruby extra-class"},[e("pre",{pre:!0,attrs:{class:"language-ruby"}},[e("code",[e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" app"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("controllers"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("static_pages_controller"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("rb\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("StaticPagesController")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ApplicationController")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token method-definition"}},[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("home")])]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@user")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" current_user "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" logged_in"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n")])])]),e("div",{staticClass:"language-ruby extra-class"},[e("pre",{pre:!0,attrs:{class:"language-ruby"}},[e("code",[e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" app"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("controllers"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("helpers"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("sessions_helper"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("rb\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("~")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("~")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("~")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token method-definition"}},[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("current_user")])]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" session"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token symbol"}},[t._v(":user_id")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@current_user")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("User")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find_by"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("id"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" session"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token symbol"}},[t._v(":user_id")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("~")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("~")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("~")]),t._v("\n")])])]),e("h2",{attrs:{id:"twitter認証"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#twitter認証","aria-hidden":"true"}},[t._v("#")]),t._v(" Twitter認証")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://github.com/AGWA/git-crypt",target:"_blank",rel:"noopener noreferrer"}},[e("code",[t._v("git-crypt")]),e("OutboundLink")],1),t._v("を使うと良いらしい?")]),t._v(" "),e("h2",{attrs:{id:"api管理のためのgit-crypt"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#api管理のためのgit-crypt","aria-hidden":"true"}},[t._v("#")]),t._v(" API管理のためのgit-crypt")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://github.com/AGWA/git-crypt",target:"_blank",rel:"noopener noreferrer"}},[t._v("git-crypt"),e("OutboundLink")],1)]),t._v(" "),e("h3",{attrs:{id:"installation"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#installation","aria-hidden":"true"}},[t._v("#")]),t._v(" Installation")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://github.com/AGWA/git-crypt/blob/master/INSTALL.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("Install.md"),e("OutboundLink")],1),t._v("に書いてある.")]),t._v(" "),e("h4",{attrs:{id:"_1-clone"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-clone","aria-hidden":"true"}},[t._v("#")]),t._v(" 1. clone")]),t._v(" "),e("p",[t._v("リポジトリをクローン."),e("br"),t._v(" "),e("code",[t._v("$ git clone https://github.com/AGWA/git-crypt.git")])]),t._v(" "),e("h4",{attrs:{id:"_2-makeしてmake-install"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-makeしてmake-install","aria-hidden":"true"}},[t._v("#")]),t._v(" 2. "),e("code",[t._v("make")]),t._v("して"),e("code",[t._v("make install")])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("$ make\n$ make install\n")])])]),e("h4",{attrs:{id:"_3-gpgで作るための-confファイルを作成"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-gpgで作るための-confファイルを作成","aria-hidden":"true"}},[t._v("#")]),t._v(" 3. "),e("code",[t._v("gpg")]),t._v("で作るための"),e("code",[t._v("*.conf")]),t._v("ファイルを作成")]),t._v(" "),e("p",[t._v("いちいち入力してるとミスがあったときに困るので, "),e("code",[t._v(".conf")]),t._v("ファイルで設定します."),e("br"),t._v("\n(今回はkey-gen.confとします)."),e("br"),t._v("\nファイルの内容は以下の通り.")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("// key-gen.conf\nKey-Type: RSA\nKey-Length: 4096\n\nSubKey-Type: RSA\nSubKey-Length: 4096\n\nExpire-Date: 2y           // 期間(お好みでok)\n\nName-Real: {real-name}    // 名前をここに入力\nName-Email: {email}       // emailアドレスをここに入力\n\npassphrase: {pass-phrase} // pass-phraseをここに入力\n\n%commit                   \n%echo Successfully done\n")])])]),e("h4",{attrs:{id:"_4-rng-toolsのインストール"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-rng-toolsのインストール","aria-hidden":"true"}},[t._v("#")]),t._v(" 4. rng-toolsのインストール")]),t._v(" "),e("p",[t._v("このまま"),e("code",[t._v("$ gpg --gen-key --batch key-gen.conf")]),t._v("をしても良いが, かなり時間がかかるので"),e("code",[t._v("rng-tools")]),t._v("パッケージを使う。")]),t._v(" "),e("blockquote",[e("p",[t._v("rngd は /dev/hwrng から乱数を得て, カーネルのエントロピープールに乱数を提供します. rngd はあくまでカーネルのエントロピープールに乱数を提供するのみで, ハードウェア乱数生成器のデータを直接 /dev/random 等から出力するのでありません. また rngd は入力されたデータが本当にランダムかどうか, FIPS 140-2 (2002-10-10) テストを行ってくれます.")])]),t._v(" "),e("blockquote",[e("p",[t._v("ハードウェア乱数生成器を利用することで /dev/random からより高速に乱数を生成することができます. ハードウェア乱数生成器を利用しない場合と利用する場合の生成速度の違いは以下のようになります.\n(引用:"),e("a",{attrs:{href:"https://blog.ymyzk.com/2015/05/raspberry-pi-hardware-random-number-generator/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Raspberry Pi のハードウェア乱数生成器を利用する"),e("OutboundLink")],1),t._v(")")])]),t._v(" "),e("p",[t._v("私はCentOS7を利用しているので, 以下のコマンドを叩きました."),e("br"),t._v("\n(環境に応じてコマンドを変更してください)")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("$ sudo yum install rng-tools\n")])])]),e("h3",{attrs:{id:"_5-gpgによる鍵の生成"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-gpgによる鍵の生成","aria-hidden":"true"}},[t._v("#")]),t._v(" 5. gpgによる鍵の生成")]),t._v(" "),e("p",[t._v("以下のコマンドを実行して鍵を生成します.")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("$ gpg --gen-key --batch ./key-gen.conf\n")])])]),e("p",[t._v("その後, 別のterminalを開き, 以下のコマンドを実行します.")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("$ sudo rngd -r /dev/urandom\n")])])]),e("p",[t._v("すると, 最初の"),e("code",[t._v("gpg")]),t._v("コマンドの方で, 以下のように出力されるはずです.")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("gpg --gen-key --batch ./key-gen.conf\ngpg: 鍵*を絶対的に信用するよう記録しました\ngpg: Successfully done\n")])])]),e("h3",{attrs:{id:"_6-git-cryptの設定"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_6-git-cryptの設定","aria-hidden":"true"}},[t._v("#")]),t._v(" 6. git-cryptの設定")]),t._v(" "),e("p",[t._v("設定は, "),e("code",[t._v(".gitattributes")]),t._v("に以下のように書き込みます."),e("br"),t._v("\nここで, {file-name}の部分には暗号化したいファイル名を入れます.")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("// .gitattributes\n{file-name} filter=git-crypt diff=git-crypt\n\ne.g.)  \nAPI-KEY.xml filter=git-crypt diff=git-crypt\n")])])]),e("p",[t._v("その後, 以下のコマンドでGPGで生成した鍵を特定できる文字列を入れます."),e("br"),t._v("\n私はgpgで鍵を生成したときの"),e("code",[t._v("email")]),t._v("を入れました.")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("$ git-crypt add-gpg-user {email}\n\ne.g.) \n$ git-crypt add-gpg-user hoge@fuga.com\n")])])]),e("h4",{attrs:{id:"_7-git-add"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_7-git-add","aria-hidden":"true"}},[t._v("#")]),t._v(" 7. git add")]),t._v(" "),e("p",[t._v("あとは, "),e("code",[t._v(".gitattributes")]),t._v("で設定したファイルをステージング("),e("code",[t._v("$ git add")]),t._v(")します."),e("br"),t._v("\n暗号化されているファイルは"),e("br"),t._v(" "),e("code",[t._v("$ git-crypt status -e")]),e("br"),t._v("\nで確認できます."),e("br"),t._v("\nもし, 暗号化されていないのにステージングされている場合は,\n"),e("code",[t._v("$ git-crypt status -f")]),e("br"),t._v("\nで暗号化対象にされるので, OKです.")]),t._v(" "),e("p",[t._v("Twitter APPの認証が必要らしいので, 少し待ちます."),e("br"),t._v(" "),e("a",{attrs:{href:"https://reasonable-code.com/rails-twitter-auth/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Ruby on RailsでTwitter認証機能を実装してみる"),e("OutboundLink")],1)]),t._v(" "),e("h1",{attrs:{id:"postの設定"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#postの設定","aria-hidden":"true"}},[t._v("#")]),t._v(" Postの設定")]),t._v(" "),e("p",[e("code",[t._v("app/controllers/shared/_task_form.html.erb")]),t._v("が正しく描画されないことが多々あった.")]),t._v(" "),e("p",[t._v("その原因は, "),e("code",[t._v("form_for")]),t._v("の引数を"),e("code",[t._v("@user.tasks")]),t._v("というリレーションにしていたからだった.")]),t._v(" "),e("p",[t._v("そのため, 新しく"),e("code",[t._v("@tasks")]),t._v("インスタンスを宣言し,"),e("br"),t._v(" "),e("code",[t._v("static_pages_controller.rb")]),t._v("の"),e("code",[t._v("home")]),t._v("アクションで,")]),t._v(" "),e("div",{staticClass:"language-ruby extra-class"},[e("pre",{pre:!0,attrs:{class:"language-ruby"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token method-definition"}},[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("home")])]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("~")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("~")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@tasks")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" current_user"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tasks"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("build "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" logged_in"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n")])])]),e("p",[t._v("を追記した.")]),t._v(" "),e("h1",{attrs:{id:"_01-30"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_01-30","aria-hidden":"true"}},[t._v("#")]),t._v(" 01/30")]),t._v(" "),e("h1",{attrs:{id:"dbの再構築"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#dbの再構築","aria-hidden":"true"}},[t._v("#")]),t._v(" DBの再構築")]),t._v(" "),e("p",[e("code",[t._v("$ rails db:reset")]),t._v("よりも"),e("code",[t._v("$ rails db:migrate:reset")]),t._v("を使うべき.")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://easyramble.com/difference-bettween-rake-db-migrate-reset.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("rake db:reset と rake db:migrate:reset の違い"),e("OutboundLink")],1)])]),t._v(" "),e("div",{staticClass:"danger custom-block"},[e("p",[e("code",[t._v("db:reset")]),t._v("はmigration fileを編集してもその内容は更新されない.")])]),t._v(" "),e("h1",{attrs:{id:"_02-01"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_02-01","aria-hidden":"true"}},[t._v("#")]),t._v(" 02/01")]),t._v(" "),e("h1",{attrs:{id:"viewの刷新"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#viewの刷新","aria-hidden":"true"}},[t._v("#")]),t._v(" Viewの刷新")]),t._v(" "),e("p",[t._v("現時点で必要のなさそうなものを全て取り払った."),e("br"),t._v("\n特に, 重複しているものなどは, まとめて"),e("code",[t._v("home.html.erb")]),t._v("に全て流し込んだ."),e("br"),t._v("\n細かい部分は, partialを作って, "),e("code",[t._v("shared/")]),t._v("フォルダに流し込んだ.")]),t._v(" "),e("h1",{attrs:{id:"tasksの表示数の変更"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#tasksの表示数の変更","aria-hidden":"true"}},[t._v("#")]),t._v(" Tasksの表示数の変更")]),t._v(" "),e("p",[t._v("allではなく, "),e("code",[t._v("take(num)")]),t._v("と書くと, num個の要素を表示できる.")]),t._v(" "),e("div",{staticClass:"language-ruby extra-class"},[e("pre",{pre:!0,attrs:{class:"language-ruby"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 3つ選んで表示")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("%")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" render "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@user")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tasks"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("all"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("take"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("%")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),e("p",[t._v("また, 表示されるデータは, モデルでソートしておくことで, 任意の順序で取り出すことが可能.")]),t._v(" "),e("div",{staticClass:"language-ruby extra-class"},[e("pre",{pre:!0,attrs:{class:"language-ruby"}},[e("code",[e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" app"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("models"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("task"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("rb\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("~")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("~")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# priorityをキーとして, 昇順でソート")]),t._v("\ndefault_scope "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" order"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("priority"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token symbol"}},[t._v(":desc")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" \n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("~")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("~")]),t._v("\n")])])]),e("h1",{attrs:{id:"priorityの追加-in-task-model"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#priorityの追加-in-task-model","aria-hidden":"true"}},[t._v("#")]),t._v(" "),e("code",[t._v("priority")]),t._v("の追加(in Task Model)")]),t._v(" "),e("p",[e("code",[t._v("priority")]),t._v("を追加することで, 重要度の高いものを上に持ってくる.")]),t._v(" "),e("h2",{attrs:{id:"poiorityの実装方法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#poiorityの実装方法","aria-hidden":"true"}},[t._v("#")]),t._v(" poiorityの実装方法")]),t._v(" "),e("p",[t._v("ヒープ木を持たせるのが良さそう.")]),t._v(" "),e("h3",{attrs:{id:"実装"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#実装","aria-hidden":"true"}},[t._v("#")]),t._v(" 実装")]),t._v(" "),e("div",{staticClass:"language-ruby extra-class"},[e("pre",{pre:!0,attrs:{class:"language-ruby"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HeapArray")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token method-definition"}},[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("initialize")])]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@heapArr")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token method-definition"}},[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("push")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    i "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@heapArr")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("size\n    \n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),t._v(" i "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 親のノード番号")]),t._v("\n      p "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("i"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 逆転してないなら抜ける")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# この部分の処理をインタラクティブにすれば良さそう")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("break")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@heapArr")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("p"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">=")]),t._v(" n\n      "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 親ノード番号を下ろして, 自分は上に")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@heapArr")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@heapArr")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("p"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n      i "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" p\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@heapArr")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" n\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("  \n \n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token method-definition"}},[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("pop")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    max "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@heapArr")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 根に持ってくる要素を取り出す")]),t._v("\n    n "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@heapArr")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pop\n\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@heapArr")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("empty"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" max\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n    \n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 根から下ろしていく")]),t._v("\n    i "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("i"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@heapArr")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("size\n      "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 子同士を比較")]),t._v("\n      left "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" i"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n      right "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" i"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@heapArr")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("nil")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@heapArr")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("left"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@heapArr")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("right"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n        left "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" right\n      "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n\n      "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("break")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@heapArr")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("left"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<=")]),t._v(" n\n      "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@heapArr")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@heapArr")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("left"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n      i "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" left      \n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@heapArr")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" n\n\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" max\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n")])])]),e("h1",{attrs:{id:"_02-02"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_02-02","aria-hidden":"true"}},[t._v("#")]),t._v(" 02/02")]),t._v(" "),e("h2",{attrs:{id:"modal-windowの実装"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#modal-windowの実装","aria-hidden":"true"}},[t._v("#")]),t._v(" Modal Windowの実装")]),t._v(" "),e("p",[t._v("Ajaxで非同期通信にしたいなという気持ちがある"),e("br"),t._v(" "),e("a",{attrs:{href:"https://logist3.com/rails5-bootstrap-modalwindow/",target:"_blank",rel:"noopener noreferrer"}},[t._v("これとかどうでしょう(Rails5とBootstrapでモーダルウィンドウ)"),e("OutboundLink")],1)]),t._v(" "),e("h2",{attrs:{id:"それのチュートリアル"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#それのチュートリアル","aria-hidden":"true"}},[t._v("#")]),t._v(" それのチュートリアル")]),t._v(" "),e("ul",[e("li",[t._v("bootstrapの前にjqueryをrequireしないとNG(app/assets/javascripts/application.js)")]),t._v(" "),e("li",[t._v("基本的に, 同じviewの中で完結させること(Controllerに関しては知らない)")]),t._v(" "),e("li",[t._v("Controllerのcreateアクションに応じて, 同じ属性のViewに位置する"),e("code",[t._v("create.js.erb")]),t._v("が呼ばれる")]),t._v(" "),e("li",[t._v("new_user_pathの呼び出しがトリガとなり, 同じ属性のViewに位置する"),e("code",[t._v("new.js.erb")]),t._v("が呼ばれる")])]),t._v(" "),e("h2",{attrs:{id:"設計"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#設計","aria-hidden":"true"}},[t._v("#")]),t._v(" 設計")]),t._v(" "),e("p",[t._v("ということは, TaskをPostする上で, 以下のようなページ遷移をさせたい.")]),t._v(" "),e("h3",{attrs:{id:"_1-top-page"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-top-page","aria-hidden":"true"}},[t._v("#")]),t._v(" 1.Top-Page")]),t._v(" "),e("ul",[e("li",[t._v("Postをonclickでmodalを表示")]),t._v(" "),e("li",[e("code",[t._v("<%= link_to ... %>")]),t._v("を使うと良さそう")])]),t._v(" "),e("h3",{attrs:{id:"_2-modal-page"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-modal-page","aria-hidden":"true"}},[t._v("#")]),t._v(" 2.Modal-Page")]),t._v(" "),e("ul",[e("li",[e("code",[t._v("decide_priority_task_path")]),t._v("をトリガとして, decide.js.erbに遷移\n"),e("ul",[e("li",[t._v("Ajaxで非同期通信したいので, <%= form.submit %>ではなく, <%= link_to %>にする")]),t._v(" "),e("li",[t._v("その際, link_toにパラメータを載せたいので, formの内容を"),e("code",[t._v("decide_priority_task_path()")]),t._v("で渡してあげたい(形式がわからない)")])])]),t._v(" "),e("li",[e("code",[t._v("decide_priority_task_path")]),t._v("に遷移後, ヒープ木に従い"),e("code",[t._v("@heapArr[p] >= n")]),t._v("の処理を繰り返し行う.")]),t._v(" "),e("li",[t._v("[a]よりも重要度は高いですか?\n"),e("ul",[e("li",[t._v("Yes: にぶたんのtrue の方")]),t._v(" "),e("li",[t._v("No : にぶたんのfalseの方")])])]),t._v(" "),e("li",[t._v("結果に応じて, 同じページで"),e("code",[t._v("render")]),t._v("し続ける.")]),t._v(" "),e("li",[t._v("(あとn回答えてね, のようなメッセージがあるといいかも)")]),t._v(" "),e("li",[t._v("それに応じてボーナスをあげてもいいかも?")]),t._v(" "),e("li",[t._v("返り値が"),e("code",[t._v("false")]),t._v("になった時に, "),e("code",[t._v("f.submit")]),t._v(", それ以外は"),e("code",[t._v("<%= link_to %>")]),t._v("でループさせる")]),t._v(" "),e("li",[e("code",[t._v("submit")]),t._v("したら, そこに決定してroot_pathに遷移")])]),t._v(" "),e("h3",{attrs:{id:"_3-top-page"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-top-page","aria-hidden":"true"}},[t._v("#")]),t._v(" 3.Top-Page")]),t._v(" "),e("ul",[e("li",[e("code",[t._v("flash[:success]")]),t._v("で, メッセージを表示")])]),t._v(" "),e("s",[t._v("\n### decide.js.erb\nここだけ`Query`モデルを作って, そこでループさせてもいい気がしてきた. ")]),t._v(" "),e("h3",{attrs:{id:"renderとredirect-toの違い"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#renderとredirect-toの違い","aria-hidden":"true"}},[t._v("#")]),t._v(" renderとredirect_toの違い")]),t._v(" "),e("ul",[e("li",[t._v("renderは別のページをそこに描画")]),t._v(" "),e("li",[t._v("redirect_toはそのページに遷移")])]),t._v(" "),e("h2",{attrs:{id:"heap-treeの改良"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#heap-treeの改良","aria-hidden":"true"}},[t._v("#")]),t._v(" Heap-Treeの改良")]),t._v(" "),e("p",[t._v("以前のものだと, ソートされていなかったため, ソート機構を加えた."),e("br"),t._v(" "),e("span",{staticClass:"katex"},[e("span",{staticClass:"katex-mathml"},[e("math",[e("semantics",[e("mrow",[e("mi",[t._v("O")]),e("mo",{attrs:{stretchy:"false"}},[t._v("(")]),e("mi",[t._v("N")]),e("mi",[t._v("l")]),e("mi",[t._v("o")]),e("mi",[t._v("g")]),e("mi",[t._v("N")]),e("mo",{attrs:{stretchy:"false"}},[t._v(")")])],1),e("annotation",{attrs:{encoding:"application/x-tex"}},[t._v("O(NlogN)")])],1)],1)],1),e("span",{staticClass:"katex-html",attrs:{"aria-hidden":"true"}},[e("span",{staticClass:"base"},[e("span",{staticClass:"strut",staticStyle:{height:"1em","vertical-align":"-0.25em"}}),e("span",{staticClass:"mord mathdefault",staticStyle:{"margin-right":"0.02778em"}},[t._v("O")]),e("span",{staticClass:"mopen"},[t._v("(")]),e("span",{staticClass:"mord mathdefault",staticStyle:{"margin-right":"0.10903em"}},[t._v("N")]),e("span",{staticClass:"mord mathdefault",staticStyle:{"margin-right":"0.01968em"}},[t._v("l")]),e("span",{staticClass:"mord mathdefault"},[t._v("o")]),e("span",{staticClass:"mord mathdefault",staticStyle:{"margin-right":"0.03588em"}},[t._v("g")]),e("span",{staticClass:"mord mathdefault",staticStyle:{"margin-right":"0.10903em"}},[t._v("N")]),e("span",{staticClass:"mclose"},[t._v(")")])])])])]),t._v(" "),e("div",{staticClass:"language-ruby extra-class"},[e("pre",{pre:!0,attrs:{class:"language-ruby"}},[e("code",[e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("~")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("~")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token method-definition"}},[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("heap_sort")])]),t._v("\n    _size "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@heapArr")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("size"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@retArr")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    _size"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("times "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("do")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@retArr")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("push"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pop"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@heapArr")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("@retArr")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("~")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("~")]),t._v("\n")])])]),e("h2",{attrs:{id:"ajax通信"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ajax通信","aria-hidden":"true"}},[t._v("#")]),t._v(" Ajax通信")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("アクションが呼ばれると, そのアクションに対応した"),e("code",[t._v("{action_name}.js.erb")]),t._v("が呼び出される.")])]),t._v(" "),e("li",[e("p",[t._v("この"),e("code",[t._v("js.erb")]),t._v("は, そのアクションに対応するController名と同じView以下に設置する.")])]),t._v(" "),e("li",[e("p",[t._v("Controllerの返り値は, "),e("code",[t._v("respond_to")]),t._v("で形式を変更する必要がある.")]),t._v(" "),e("ul",[e("li",[e("code",[t._v("format.html")]),t._v(", "),e("code",[t._v("format.js")]),t._v("等")])])]),t._v(" "),e("li",[e("p",[e("a",{attrs:{href:"https://qiita.com/__tambo__/items/45211df065e0c037d032",target:"_blank",rel:"noopener noreferrer"}},[t._v("これとか"),e("OutboundLink")],1),t._v(", "),e("a",{attrs:{href:"https://railstutorial.jp/chapters/following_users?version=4.2#sec-a_working_follow_button_with_ajax",target:"_blank",rel:"noopener noreferrer"}},[t._v("これとか"),e("OutboundLink")],1),t._v("が参考になるかも?")])])]),t._v(" "),e("h1",{attrs:{id:"_02-03"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_02-03","aria-hidden":"true"}},[t._v("#")]),t._v(" 02/03")]),t._v(" "),e("h2",{attrs:{id:"modal-windowの実装の続き-前はこっち"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#modal-windowの実装の続き-前はこっち","aria-hidden":"true"}},[t._v("#")]),t._v(" Modal Windowの実装の続き("),e("a",{attrs:{href:"#modal-window%E3%81%AE%E5%AE%9F%E8%A3%85"}},[t._v("前はこっち")]),t._v(")")]),t._v(" "),e("p",[t._v("画面遷移はできているので, 実装をするだけ(それが難しい)")]),t._v(" "),e("p",[t._v("午後は実装する.\nやることのまとめ.")]),t._v(" "),e("ul",[e("li",[t._v("view/static_pages/home.html.erb<%= link_to tasks_path %>")])]),t._v(" "),e("h1",{attrs:{id:"_02-05"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_02-05","aria-hidden":"true"}},[t._v("#")]),t._v(" 02/05")]),t._v(" "),e("h2",{attrs:{id:"twitter認証-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#twitter認証-2","aria-hidden":"true"}},[t._v("#")]),t._v(" Twitter認証")]),t._v(" "),e("h3",{attrs:{id:"initialize"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#initialize","aria-hidden":"true"}},[t._v("#")]),t._v(" Initialize")]),t._v(" "),e("p",[t._v("Gem "),e("code",[t._v("omniauth-twitter")]),t._v("と"),e("code",[t._v("device")]),t._v("で実装.")]),t._v(" "),e("ul",[e("li",[t._v("Gemfileに追記")]),t._v(" "),e("li",[e("code",[t._v("$ rails g devise:install")]),t._v("でdeviceのインストール\n"),e("ul",[e("li",[t._v("device使いますよ, という意思表示")])])]),t._v(" "),e("li",[t._v("デフォルトMailUrlの設定("),e("code",[t._v("config/environments/development.rb")]),t._v("に"),e("code",[t._v("config.action_mailer.default_url_options = { host: '0.0.0.0', port: '3000' }")]),t._v("を追加")]),t._v(" "),e("li",[t._v("RootUrlの設定\n"),e("ul",[e("li",[e("code",[t._v("config/routes")]),t._v("に追記")])])]),t._v(" "),e("li",[t._v("Devise用のViewを作成("),e("code",[t._v("$ rails g devise:views")]),t._v(")")]),t._v(" "),e("li",[t._v("Devise用のUserModelの作成("),e("code",[t._v("$ rails g devise User")]),t._v(")")]),t._v(" "),e("li",[t._v("Omniauth-twitter用のカラムを追加("),e("code",[t._v("$ rails g migration add_columns_to_users provider uid username")]),t._v(")")])]),t._v(" "),e("h3",{attrs:{id:"twitter-authentication"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#twitter-authentication","aria-hidden":"true"}},[t._v("#")]),t._v(" Twitter Authentication")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://developer.twitter.com/en/apps",target:"_blank",rel:"noopener noreferrer"}},[t._v("Twitter App"),e("OutboundLink")],1),t._v("でアプリケーションを登録.")]),t._v(" "),e("li",[t._v("API_KEYとAPI_SECRET_KEYを取得")]),t._v(" "),e("li",[t._v("callback用のControllerを作成\n"),e("ul",[e("li",[t._v("omniauthで入手した情報を元に,")]),t._v(" "),e("li",[t._v("登録されていた場合はログイン")]),t._v(" "),e("li",[t._v("登録されていない場合は新しく追加")]),t._v(" "),e("li",[t._v("という流れを踏む.")])])])]),t._v(" "),e("h3",{attrs:{id:"bugfix"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#bugfix","aria-hidden":"true"}},[t._v("#")]),t._v(" bugfix")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://teratail.com/questions/172791",target:"_blank",rel:"noopener noreferrer"}},[t._v("teratailでの投稿([Rails]Deviseを用いたTwitter認証で出るOAuth::Unauthorized 403 Forbiddenを解消したい)"),e("OutboundLink")],1)]),t._v(" "),e("h3",{attrs:{id:"twitterのみでログイン可能にする"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#twitterのみでログイン可能にする","aria-hidden":"true"}},[t._v("#")]),t._v(" Twitterのみでログイン可能にする")]),t._v(" "),e("ul",[e("li",[t._v("EmailおよびPassの情報をdummyのものと, Twitterからハッシュ化した文字列で代用する.")])]),t._v(" "),e("h3",{attrs:{id:"めも"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#めも","aria-hidden":"true"}},[t._v("#")]),t._v(" めも")]),t._v(" "),e("ul",[e("li",[t._v("callback関数でバグるので, 本番環境でやっていた.")]),t._v(" "),e("li",[t._v("Twitter Developersのcallback_urlに複数ルートを追加するとうまくいった.")]),t._v(" "),e("li",[t._v("Vagrant使ってて, こういうパス関係に強くなってきた気がする")])]),t._v(" "),e("h3",{attrs:{id:"参考資料"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#参考資料","aria-hidden":"true"}},[t._v("#")]),t._v(" 参考資料")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://qiita.com/cigalecigales/items/f4274088f20832252374",target:"_blank",rel:"noopener noreferrer"}},[t._v("["),e("em",[t._v("Rails")]),t._v("] deviseの使い方（rails5版）"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://saruwakakun.com/memo/omniauth-twitter",target:"_blank",rel:"noopener noreferrer"}},[t._v("CallbackURLs"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://saruwakakun.com/memo/omniauth-twitter",target:"_blank",rel:"noopener noreferrer"}},[t._v("既存のRailsアプリにユーザ名とパスワードでログインできるようにする"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://blog.freedom-man.com/rails-devise-omniauth/",target:"_blank",rel:"noopener noreferrer"}},[t._v("初心者がRails+DeviseでTodoアプリ作る【Omniauth編】"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://qiita.com/nishina555/items/e5886339d381db61b412",target:"_blank",rel:"noopener noreferrer"}},[t._v("[初心者向け] Ruby on Rails デバッグ方法まとめ"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://techbooster.org/android/mashup/4525/",target:"_blank",rel:"noopener noreferrer"}},[t._v("TWITTERでOAUTH認証を行う(1：TWITTERへのアプリケーション登録)"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://qiita.com/ntkgcj/items/c3108c19fb64acc9dd8d",target:"_blank",rel:"noopener noreferrer"}},[t._v("twitterアカウントでログイン devise+omniauth (rails5)"),e("OutboundLink")],1)])]),t._v(" "),e("h1",{attrs:{id:"_02-06"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_02-06","aria-hidden":"true"}},[t._v("#")]),t._v(" 02/06")]),t._v(" "),e("h2",{attrs:{id:"task-model-controllersの移行"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#task-model-controllersの移行","aria-hidden":"true"}},[t._v("#")]),t._v(" Task Model & Controllersの移行")]),t._v(" "),e("p",[e("code",[t._v("$ rails g model Task name:string")]),e("br"),t._v("\nでモデル追加.")]),t._v(" "),e("p",[e("a",{attrs:{href:"#todo"}},[t._v("#todo")]),t._v("で書いた部分を改めてやるだけ.")]),t._v(" "),e("h2",{attrs:{id:"メニューにtwitterloginを実装"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#メニューにtwitterloginを実装","aria-hidden":"true"}},[t._v("#")]),t._v(" メニューにTwitterLoginを実装")]),t._v(" "),e("ul",[e("li",[t._v("app/helpers/にomniauth用のメソッドをいくつか用意\n"),e("ul",[e("li",[e("a",{attrs:{href:"http://hajimete-ruby.jugem.jp/?cid=19",target:"_blank",rel:"noopener noreferrer"}},[t._v("詳細はここ"),e("OutboundLink")],1)])])]),t._v(" "),e("li",[e("a",{attrs:{href:"#bootstrap%E3%81%AE%E8%BF%BD%E5%8A%A0"}},[t._v("bootstrapの追加")]),t._v(" "),e("ul",[e("li",[e("code",[t._v("Gemfile")]),t._v("にbootstrapを追加")]),t._v(" "),e("li",[e("code",[t._v("app/assets/javascripts/application.js")]),t._v("にrequireで追加")])])])]),t._v(" "),e("h2",{attrs:{id:"herokuにデプロイ"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#herokuにデプロイ","aria-hidden":"true"}},[t._v("#")]),t._v(" Herokuにデプロイ")]),t._v(" "),e("ul",[e("li",[t._v("heroku update")]),t._v(" "),e("li",[t._v("heroku login")]),t._v(" "),e("li",[t._v("heroku create")]),t._v(" "),e("li",[t._v("gitでprodutionブランチを切る")]),t._v(" "),e("li",[t._v("Herokuのadminページでgithubと連携")]),t._v(" "),e("li",[t._v("heroku run rake db:migrate")]),t._v(" "),e("li",[t._v("おわり")])]),t._v(" "),e("h2",{attrs:{id:"結果"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#結果","aria-hidden":"true"}},[t._v("#")]),t._v(" 結果")]),t._v(" "),e("ul",[e("li",[t._v("ひとまずデプロイは成功")]),t._v(" "),e("li",[t._v("PCだけでなく, 他のブラウザ, 機器からもアクセス可能なことを確認")])]),t._v(" "),e("h2",{attrs:{id:"ブラウザの対応"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ブラウザの対応","aria-hidden":"true"}},[t._v("#")]),t._v(" ブラウザの対応")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",{staticStyle:{"text-align":"center"}},[t._v("ブラウザ")]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[t._v("o/x")])])]),t._v(" "),e("tbody",[e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("Google Chrome(MacOS)")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("o")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("Safari(MacOS)")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("o")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("FireFox(MacOS)")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("x(表示が乱れるので, 修正の必要あり)")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("Google Chrome(iPhone)")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("o(レスポンシブデザインにすべき?)")])]),t._v(" "),e("tr",[e("td",{staticStyle:{"text-align":"center"}},[t._v("Safari(iPhone)")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("o('')")])])])]),t._v(" "),e("h2",{attrs:{id:"twitterへのメンション"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#twitterへのメンション","aria-hidden":"true"}},[t._v("#")]),t._v(" Twitterへのメンション")]),t._v(" "),e("ul",[e("li",[t._v("一定確率でTwitterにメンションを飛ばす.\n"),e("ul",[e("li",[t._v("確率は, 行ったTaskに関して重み付けをした方がよいかと")])])]),t._v(" "),e("li",[t._v("その通知を受け取る")])]),t._v(" "),e("h2",{attrs:{id:"レスポンシブデザイン"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#レスポンシブデザイン","aria-hidden":"true"}},[t._v("#")]),t._v(" レスポンシブデザイン")]),t._v(" "),e("ul",[e("li",[t._v("これいいなって思う(scssの設定をいじればいい気がする)")]),t._v(" "),e("li",[t._v("bootstrap -> Materialにする気持ちも無きにしも非ず")]),t._v(" "),e("li",[t._v("ただ, 機能面を重視したいので, これはあと回しでok")])]),t._v(" "),e("h1",{attrs:{id:"_02-11"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_02-11","aria-hidden":"true"}},[t._v("#")]),t._v(" 02/11")]),t._v(" "),e("h2",{attrs:{id:"タスクの全表示がない"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#タスクの全表示がない","aria-hidden":"true"}},[t._v("#")]),t._v(" タスクの全表示がない")]),t._v(" "),e("ul",[e("li",[t._v("作る")]),t._v(" "),e("li",[e("code",[t._v("view/tasks/show.html.erb")]),t._v("を追加して, そこに入れれば良さそう?")]),t._v(" "),e("li",[t._v("User1に対してnのTaskが振られているので, "),e("code",[t._v("view/users/index.html.erb")]),t._v("に入れる方が良さそう\n"),e("ul",[e("li",[t._v("(show.html.erbにすると, indexの作り方がわからなくなるため, 別の用途でindexが必要な時に変えれば問題ないかと)")])])])]),t._v(" "),e("h3",{attrs:{id:"設計-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#設計-2","aria-hidden":"true"}},[t._v("#")]),t._v(" 設計")]),t._v(" "),e("p",[t._v("1パートのみで構成できる")]),t._v(" "),e("ul",[e("li",[t._v("Userの持つtasksを全て表示するだけ")])])])},[],!1,null,null,null);a.default=r.exports}}]);